!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="./",t(0)}([function(e,t,n){e.exports=n(13)},function(e,t){e.exports={Emitter:[{bulletOpts:{orignX:36,orignY:64,orignWidth:6,orignHeight:14},speed:-20,number:1,limit:1,spacing:-100,timeout:100,propulsiontype:"line",type:"circle"},{bulletOpts:{orignX:103,orignY:352,orignWidth:16,orignHeight:32},speed:2,number:20,limit:10,spacing:30,timeout:500,propulsiontype:"circle",type:"circle"},{bulletOpts:{orignX:32,orignY:32,orignWidth:16,orignHeight:16},speed:5,number:20,limit:10,spacing:30,timeout:1500,propulsiontype:"crosspow",type:"circle"},{bulletOpts:{orignX:128,orignY:208,orignWidth:32,orignHeight:32},speed:15,number:25,limit:10,spacing:50,timeout:1500,propulsiontype:"test",type:"circle"},{bulletOpts:{orignX:192,orignY:256,orignWidth:32,orignHeight:32},speed:15,number:15,limit:10,spacing:50,timeout:1500,propulsiontype:"crosspow",type:"circle"},{bulletOpts:{orignX:64,orignY:448,orignWidth:64,orignHeight:64},speed:15,number:10,limit:8,spacing:30,timeout:1500,propulsiontype:"crosspow",type:"circle"},{bulletOpts:{orignX:32,orignY:32,orignWidth:16,orignHeight:16},speed:15,number:30,limit:10,spacing:50,timeout:1500,propulsiontype:"circle",type:"circle"},{bulletOpts:{orignX:32,orignY:32,orignWidth:16,orignHeight:16},speed:10,number:20,limit:10,spacing:50,timeout:1500,propulsiontype:"test",type:"circle"}],Explosion:[{orignX:0,orignY:0,orignWidth:62,orignHeight:62}],Enemy:[{orignX:0,orignY:1712,orignWidth:48,orignHeight:48,HP:300}],Player:[{orignX:0,orignY:294,orignWidth:90,orignHeight:90,HP:5}]}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i,o,r){n(this,e),Object.assign(this,{x:t,y:i,cx:t+o/2,cy:i+r/2,width:o,height:r,halfWidth:o/2,halfHeight:r/2})}return i(e,[{key:"move",value:function(e,t){this.x=e-this.halfWidth,this.y=t-this.halfHeight,this.cx=e,this.cy=t}},{key:"resize",value:function(e){this.width*=e,this.height*=e,this.halfWidth*=e,this.halfHeight*=e}},{key:"carve",value:function(t){var n=[],i=[],o=t.cx,r=t.cy,a=o-this.x,s=r-this.y,u=a>0&&a<this.width,c=s>0&&s<this.height;if(u&&c)for(i=this.carve(o,this.y);i.length;)n=n.concat(i.shift().carve(this.x,r));else u?n.push(new e(this.x,this.y,a,this.height),new e(o,this.y,this.width-a,this.height)):c&&n.push(new e(this.x,this.y,this.width,s),new e(this.x,r,this.width,this.height-s));return n}}]),e}();t["default"]=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(2),c=i(u),l=n(17),h=i(l),f=n(1),d=i(f),p=function(e){function t(e,n,i,a){o(this,t);var s=r(this,Object.getPrototypeOf(t).call(this,n-a.orignWidth/2,i-a.orignHeight/2,a.orignWidth,a.orignHeight));return Object.assign(s,{img:e,orignX:a.orignX,orignY:a.orignY,orignWidth:a.orignWidth,orignHeight:a.orignHeight,mapX:a.orignX,mapY:a.orignY,mapWidth:a.orignWidth,mapHeight:a.orignHeight,angle:0,removed:!1,undead:!1}),s}return a(t,e),s(t,[{key:"draw",value:function(e){var t=Math.atan(this.y/this.x),n=this.y/Math.sin(t),i=n*Math.sin(this.angle+t),o=i-this.y,r=i/Math.tan(this.angle+t)-this.x;e.save(),e.rotate(-this.angle),e.translate(r,o),e.drawImage(this.img,this.orignX,this.orignY,this.orignWidth,this.orignHeight,this.cx-this.mapWidth/2,this.cy-this.mapHeight/2,this.mapWidth,this.mapHeight),e.restore()}},{key:"change",value:function(e){this.orignX=Math.round(e*this.orignWidth)}},{key:"rotate",value:function(e){this.angle=e}},{key:"remap",value:function(e){this.mapWidth*=e,this.mapHeight*=e}},{key:"name",value:function(e){this.name=e}},{key:"go",value:function(){}},{key:"destroy",value:function(e,n){var i=new t(e,this.cx,this.cy,d["default"].Explosion[0]);i.undead=!0,(0,h["default"])(i,0,15,75,n),this.removed=!0}}]),t}(c["default"]);t["default"]=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),c=i(u),l=n(5),h=i(l),f=function(e){function t(e,n,i,a){o(this,t);var s=r(this,Object.getPrototypeOf(t).call(this,e,n,i,a));return s.bulletOpts={orignX:36,orignY:64,orignWidth:6,orignHeight:14},s.speed=20,s.number=15,s.limit=5,s.dist=0,s.spacing=100,s.timeout=500,s.propulsiontype="line",s.type="circle",s.fireTimes=0,s.fireSwitch=!0,s.init(a),s}return a(t,e),s(t,[{key:"init",value:function(e){Object.assign(this,e)}},{key:"circle",value:function(e){for(var t=void 0,n=void 0,i=0;i<this.number;++i)t=2*Math.PI*i/this.number,n=new h["default"](this.img,this.cx,this.cy,this.bulletOpts),n.set(t,this.speed,this.propulsiontype),e.insert(n)}},{key:"fire",value:function(e,t){var n=this;return this.fireSwitch?this.dist<this.spacing?this.dist+=this.speed:(this.dist=0,this.fireTimes>this.limit?(this.fireTimes=0,this.ceasefire(),this.onCeasefire(),setTimeout(function(){n.fireSwitch=!0},this.timeout)):(this.fireTimes++,void this[this.type](e))):this.onCeasefireInterval()}},{key:"ceasefire",value:function(){this.fireSwitch=!1}},{key:"onCeasefireInterval",value:function(){}},{key:"onCeasefire",value:function(){}}]),t}(c["default"]);t["default"]=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),c=i(u),l=function(e){function t(e,n,i,a){o(this,t);var s=r(this,Object.getPrototypeOf(t).call(this,e,n,i,a));return Object.assign(s,{angle:0,dist:0,propulsiontype:null}),s}return a(t,e),s(t,[{key:"set",value:function(e,t,n){this.angle=e,this.dist=t,this.propulsiontype=n}},{key:"go",value:function(){this[this.propulsiontype](this.angle,this.dist)}},{key:"_motion",value:function(e,t){this.cx+=e,this.cy+=t,this.x+=e,this.y+=t}},{key:"_gravity",value:function(){this.cy+=5,this.y+=5}},{key:"line",value:function(e,t){this._motion(e,t)}},{key:"circle",value:function(e,t){var n=Math.round(Math.sin(e)*t),i=Math.round(Math.cos(e)*t);this._motion(n,i)}},{key:"crosspow",value:function(e,t){var n=Math.round(Math.sin(e)*t),i=Math.round(Math.pow(Math.sqrt(t),1.5));this._motion(n,i)}},{key:"test",value:function(e,t){var n=this.cx+Math.round(Math.sin(e)*t),i=Math.round(Math.pow(this.cy+1,1.002));this.move(n,i)}}]),t}(c["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return Math.floor(Math.random()*(t-e)+e)}Object.defineProperty(t,"__esModule",{value:!0});var u=function y(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(3),l=(i(c),n(4)),h=i(l),f=n(1),d=i(f),p=function(e){function t(e,n,i,a){o(this,t);var c=r(this,Object.getPrototypeOf(t).call(this,e,n,i,a));return c.HP=0,u(Object.getPrototypeOf(t.prototype),"remap",c).call(c,2.5),u(Object.getPrototypeOf(t.prototype),"resize",c).call(c,2),c.HP=a.HP,c.init(d["default"].Emitter[2]),c.onCeasefire=function(){c.init(d["default"].Emitter[s(1,d["default"].Emitter.length)])},c}return a(t,e),t}(h["default"]);t["default"]=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},u=n(4),c=i(u),l=n(1),h=i(l),f=function(e){function t(e,n,i,a){o(this,t);var u=r(this,Object.getPrototypeOf(t).call(this,e,n,i,a));return s(Object.getPrototypeOf(t.prototype),"resize",u).call(u,.1),u.HP=a.HP,u.init(h["default"].Emitter[0]),u}return a(t,e),t}(c["default"]);t["default"]=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){return e.x+e.width>=t.x&&e.y+e.height>=t.y&&e.x-e.width<=t.x+t.width&&e.y-e.height<=t.y+t.height}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),u=i(s),c=function(){function e(t,n){o(this,e),this.objects=[],this.nodes=[],this.level="undefined"==typeof n?0:n,this.bounds=t}return a(e,[{key:"clear",value:function(){var e=this.nodes,t=void 0;for(this.objects.splice(0,this.objects.length);e.length;)t=e.shift(),t.clear()}},{key:"getIndex",value:function(e){var t=this.bounds,n=e.y+e.height<=t.cy,i=e.y>=t.cy,o=e.x+e.width<=t.cx,r=e.x>=t.cx;if(n){if(r)return 0;if(o)return 1}else if(i){if(o)return 2;if(r)return 3}return-1}},{key:"split",value:function(){var t=this.level,n=this.bounds,i=n.x,o=n.y,r=n.cx,a=n.cy,s=n.width/2,c=n.height/2;this.nodes.push(new e(new u["default"](r,o,s,c),t+1),new e(new u["default"](i,o,s,c),t+1),new e(new u["default"](i,a,s,c),t+1),new e(new u["default"](r,a,s,c),t+1))}},{key:"insert",value:function(t){var n=this.objects,i=void 0,o=void 0;if(this.nodes.length&&(o=this.getIndex(t),o!==-1))return void this.nodes[o].insert(t);if(n.push(t),!this.nodes.length&&this.objects.length>e.MAX_OBJECTS&&this.level<e.MAX_LEVELS)for(this.split(),i=n.length-1;i>=0;i--)o=this.getIndex(n[i]),o!==-1&&this.nodes[o].insert(n.splice(i,1)[0])}},{key:"retrieve",value:function(e){var t=[],n=void 0,i=void 0,o=void 0;if(this.nodes.length)if(o=this.getIndex(e),o!==-1)t=t.concat(this.nodes[o].retrieve(e));else for(n=e.carve(this.bounds),i=n.length-1;i>=0&&(o=this.getIndex(n[i]),o!==-1);i--)t=t.concat(this.nodes[o].retrieve(e));return t=t.concat(this.objects)}},{key:"refresh",value:function(e){var t=this.objects,n=[],i=void 0,o=void 0,a=void 0,s=void 0;for(e=e||this,a=t.length-1;a>=0;a--)i=t[a],!i.removed&&r(i,e.bounds)?(o=this.getIndex(i),o!==-1&&r(i,this.bounds)?this.nodes.length&&this.nodes[o].insert(t.splice(a,1)[0]):this!==e&&e.insert(t.splice(a,1)[0])):this.objects.splice(a,1);for(a=0,s=this.nodes.length;a<s;a++)n=n.concat(this.nodes[a].refresh(e));return n=n.concat(t)}}]),e}();c.MAX_OBJECTS=10,c.MAX_LEVELS=5,t["default"]=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function o(){n(this,o),this.check={cube:function(e,t){return Math.abs(e.cx-t.cx)<(e.width+t.width)/2&&Math.abs(e.cy-t.cy)<(e.height+t.height)/2},circle:function(e,t){var n=Math.sqrt(Math.pow(Math.abs(e.cx-t.cx),2)+Math.pow(Math.abs(e.cy-t.cy),2)),i=Math.sqrt(Math.pow((e.width+t.width)/2,2)+Math.pow((e.height+t.height)/2,2));return n<i}}};t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){n(this,e),this.startPos={x:0,y:0},this.movePos={x:0,y:0},this.eventTypeList=[],this.callbackList=[],this.event={tap:function(e,t,n){Math.abs(t.movePos.x-t.startPos.x)>1||Math.abs(t.movePos.y-t.startPos.y)>1||e(n)},swipe:function(e,t,n){return e(n),t.movePos={x:0,y:0}}}}return i(e,[{key:"addHandler",value:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}},{key:"init",value:function(e){var t=this;e=e||document;var n="ontouchstart"in document?"touchstart":"mousedown",i="ontouchmove"in document?"touchmove":"mousemove",o="ontouchend"in document?"touchend":"mouseup",r=function(e){e=e||window.event;var n="ontouchstart"in document?e.touches[0]:e;t.startPos={x:n.pageX,y:n.pageY},t.movePos=t.startPos},a=function(e){e=e||window.event;var n="ontouchstart"in document?e.touches[0]:e;t.movePos={x:n.pageX,y:n.pageY},e.preventDefault()},s=function(e){e=e||event,t.eventTypeList.forEach(function(n,i){t.event[n](t.callbackList[i].cb,t,e)})};this.addHandler(e,n,r),this.addHandler(e,i,a),this.addHandler(e,o,s)}},{key:"on",value:function(e,t){return this.eventTypeList.push(e),this.callbackList.push({cb:t}),this}}]),e}();t["default"]=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){n(this,e),this.layer=null,this.loaded=!0,this.loadedCount=0,this.totalCount=0,this.soundFileExtn=".ogg"}return i(e,[{key:"init",value:function(e){var t=void 0,n=void 0,i=document.createElement("audio");i.canPlayType?(t=""!=i.canPlayType("audio/mpeg"),n=""!=i.canPlayType('audio/ogg; codecs = "vorbis"')):(t=!1,n=!1),this.soundFileExtn=n?".ogg":t?".mp3":void 0,this.layer=e}},{key:"onload",value:function(){}},{key:"itemLoaded",value:function(){this.loadedCount++,this.loadedCount===this.totalCount&&(this.loaded=!0,this.layer.style.display="none",this.onload&&(this.onload(),this.onload=void 0))}},{key:"loadImage",value:function(e){var t=this;this.totalCount++,this.loaded=!1,this.layer.style.display="block";var n=new Image;return n.src=e,n.onload=function(){return t.itemLoaded()},n}},{key:"loadSound",value:function(e){this.totalCount++,this.loaded=!1,this.layer.style.display="block";var t=new Audio;return t.src=e+this.soundFileExtn,t.addEventListener("canplaythrough",this.itemLoaded,!1),t}}]),e}();t["default"]=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){n(this,e),this.canvas=null,this.ctx=null,this.renderWidth=0,this.renderHeight=0,this.queue=[]}return i(e,[{key:"init",value:function(e){this.canvas=e,this.ctx=e.getContext("2d"),this.renderWidth=e.width,this.renderHeight=e.height}},{key:"add",value:function(e){this.queue=this.queue.concat(e)}},{key:"empty",value:function(){this.queue=[]}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.renderWidth,this.renderHeight)}},{key:"render",value:function(){var e=this;this.queue.forEach(function(t){t.go(),t.draw(e.ctx)})}}]),e}();t["default"]=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(9),r=i(o),a=n(10),s=i(a),u=n(11),c=i(u),l=n(12),h=i(l),f=n(6),d=i(f),p=n(7),y=i(p),g=n(8),v=i(g),m=n(2),b=i(m);n(18),n(19);var w=n(15),O=i(w),x=n(1),P=i(x),_={Collision:new r["default"],Render:new h["default"],Loader:new c["default"],Control:new s["default"],Resource:{images:{},sounds:{}},Setting:null,Dom:{scorelayer:document.getElementById("score-layer"),menulayer:document.getElementById("menu-layer"),resetlayer:document.getElementById("reset-layer"),loadlayer:document.getElementById("load-layer"),bglayer:document.getElementById("bg-layer"),canvas:document.getElementById("draw-target"),bgcanvas:document.getElementById("bg-target"),score:document.getElementById("score")}},E={RAF:null,start:function(){var e=this,t=_.Render,n=_.Control,i=_.Resource,o=_.Dom,r=_.Loader;o.canvas.width=document.documentElement.clientWidth,o.canvas.height=document.documentElement.clientHeight,o.canvas.backgroundAlpha=0,o.bgcanvas.width=document.documentElement.clientWidth,o.bgcanvas.height=document.documentElement.clientHeight,t.init(o.canvas),n.init(document),r.init(o.loadlayer),i.images.all=r.loadImage(O["default"].images.ALL),i.images.player=r.loadImage(O["default"].images.PLAYER),i.images.explosion=r.loadImage(O["default"].images.EXPLOSION),i.images.bg=r.loadImage(O["default"].images.BG),r.onload=function(){return e.play()}},play:function(){var e=this,t=_.Collision,n=_.Render,i=_.Control,o=_.Resource,r=_.Dom;r.bgcanvas.getContext("2d").drawImage(o.images.bg,0,0,r.bgcanvas.width,r.bgcanvas.height);var a=new d["default"](o.images.all,n.renderWidth/2,n.renderHeight/5,P["default"].Enemy[0]),s=new y["default"](o.images.player,n.renderWidth/2,n.renderHeight,P["default"].Player[0]),u=new b["default"](0,0,r.canvas.width,r.canvas.height),c=new v["default"](u),l=new v["default"](u),h=1;a.onCeasefireInterval=function(){this.move(this.cx+h,this.cy),this.cx<10?h=1:this.cx>r.canvas.width-10&&(h=-1)};var f=o.images.explosion,p=[],g=[];j.init();var m=function w(){e.RAF=window.requestAnimationFrame(w),a.fire(l),s.fire(c,"player"),s.move(i.movePos.x,i.movePos.y),l.retrieve(s).forEach(function(n){n.removed||n.undead||!t.check.circle(s,n)||(n.destroy(f,l),s.HP--,s.HP<=0&&(s.destroy(f,l),s.ceasefire(),setTimeout(function(){r.resetlayer.style.display="block",window.cancelAnimationFrame(e.RAF)},1e3)))}),c.retrieve(a).forEach(function(n){n.removed||n.undead||!t.check.circle(a,n)||(n.destroy(f,l),a.HP--,r.score.innerHTML=parseInt(r.score.innerHTML)+100,a.HP<=0&&(a.destroy(f,l),a.ceasefire(),setTimeout(function(){r.resetlayer.style.display="block",window.cancelAnimationFrame(e.RAF)},1e3)))}),p=l.refresh(),g=c.refresh(),n.add(s),n.add(a),n.add(p),n.add(g),n.clear(),n.render(),n.empty(),j.show()};this.RAF=window.requestAnimationFrame(m),i.on("tap",function(t){t=t||window.event;var n=t.srcElement||t.target;"reset"==n.id&&e.reset()})},reset:function(){window.cancelAnimationFrame(this.RAF),_.Render.clear(),_.Render.empty(),_.Dom.score.innerHTML="0",_.Dom.resetlayer.style.display="none",this.play()},end:function(){}},j={layer:null,startTime:null,endTime:null,frame:0,init:function(){this.startTime=+new Date,this.layer=document.getElementById("fps")},show:function(){this.endTime=+new Date,this.frame=Math.round(1e3/(this.endTime-this.startTime)),this.startTime=this.endTime,this.layer.innerHTML=this.frame}};E.start()},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=i(o),a=n(24),s=i(a),u=n(23),c=i(u),l=n(22),h=i(l);t["default"]={images:{ALL:r["default"],PLAYER:s["default"],EXPLOSION:c["default"],BG:h["default"]},sounds:[]}},,function(e,t){"use strict";function n(e,t,n,i,o){var r=void 0;!function a(){return t>=n?(e.removed=!0,e.undead=!1,void clearTimeout(r)):(e.change(++t),o.insert(e),void(r=setTimeout(a,i)))}()}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t){"use strict";var n=0;["ms","moz","webkit","o"].forEach(function(e){window.requestAnimationFrame=window[e+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e+"CancelRequestAnimationFrame"]}),window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),i=Math.max(0,16-(t-n)),o=window.setTimeout(function(){e(t+i)},i);return n=t+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})},function(e,t){},,function(e,t,n){e.exports=n.p+"images/all.png"},function(e,t,n){e.exports=n.p+"images/bg.png"},function(e,t,n){e.exports=n.p+"images/explosion.png"},function(e,t,n){e.exports=n.p+"images/player.png"}]);